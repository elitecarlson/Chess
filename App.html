<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carl-labs | Chess</title>
  <link rel="stylesheet" href="./Assets/css/Board.css">
</head>
<body style="background-color: #312E2B;">
  <div class='board'>
    <div class=" piece wr square-a1"></div>
    <div class=" piece wn square-b1"></div>
    <div class=" piece wb square-c1"></div>
    <div class=" piece wq square-d1"></div>
    <div class=" piece wk square-e1"></div>
    <div class=" piece wb square-f1"></div>
    <div class=" piece wn square-g1"></div>
    <div class=" piece wr square-h1"></div>
    <div class=" piece wp square-a2"></div>
    <div class=" piece wp square-b2"></div>
    <div class=" piece wp square-c2"></div>
    <div class=" piece wp square-d2"></div>
    <div class=" piece wp square-e2"></div>
    <div class=" piece wp square-f2"></div>
    <div class=" piece wp square-g2"></div>
    <div class=" piece wp square-h2"></div>
    <div class=" piece br square-a8"></div>
    <div class=" piece bn square-b8"></div>
    <div class=" piece bb square-c8"></div>
    <div class=" piece bq square-d8"></div>
    <div class=" piece bk square-e8"></div>
    <div class=" piece bb square-f8"></div>
    <div class=" piece bn square-g8"></div>
    <div class=" piece br square-h8"></div>
    <div class=" piece bp square-a7"></div>
    <div class=" piece bp square-b7"></div>
    <div class=" piece bp square-c7"></div>
    <div class=" piece bp square-d7"></div>
    <div class=" piece bp square-e7"></div>
    <div class=" piece bp square-f7"></div>
    <div class=" piece bp square-g7"></div>
    <div class=" piece bp square-h7"></div>

    <!-- <div class=" previouspos square-d3"></div> -->
    <div id="hint"></div>
  </div>
<script>
  const allpieces = document.querySelectorAll('.piece');
  const hint = document.getElementById('hint');
  const clickedpiece = [];
  const hints = [];
  allpieces.forEach(element => {
    element.addEventListener('click', ()=>{
      const pieceposition = element.className.split(' ')[3];
      const piececolor = element.className.split(' ')[2].split('')[0];
      const piece = element.className.split(' ')[2].split('')[1];
      const pieceandcolor = element.className.split(' ')[2]
      const rank = parseInt(pieceposition.split('-')[1].split('')[1])
      const file = pieceposition.split('-')[1].split('')[0]
      // Prevent setting multiple colors
      if (clickedpiece.length > 0) {
        clickedpiece[0].removeAttribute("style");
        clickedpiece.length = 0;
      }
      if (hints.length > 0) {
        hints.length = 0;
      }
      element.style.backgroundColor = "rgba(255, 255, 0, 0.479)";
      clickedpiece.push(element);
      // White pawn rules
      if (pieceandcolor == 'wp'){
        if (rank == 2) {
          console.log(hints)
          hints.push(rank+1)
          hints.push(rank+2);
          hints.forEach(element => {
            console.log(file+element);
            hint.innerHTML += `<div class="hint square-${file+element}"><div class="hintdot"></div></div>`
          });
        }else{
          // console.log('one step allowed');
        }
      }
    })
  });
</script>
</body>
</html>
